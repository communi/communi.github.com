<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Communi: IrcMessageFilter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://communi.github.com"><img alt="Logo" src="communi.png"/></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Communi
   &#160;<span id="projectnumber">3.0.0</span>
   </div>
   <div id="projectbrief">A cross-platform IRC framework written with Qt</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_irc_message_filter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">IrcMessageFilter Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span><div class="ingroups"><a class="el" href="group__core.html">IrcCore</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides an interface for filtering messages.  
 <a href="class_irc_message_filter.html#details">More...</a></p>

<p>Inherited by IrcQmlFilter, and IrcQmlFilter.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab2523779a8e758aa38f46a44e900ac8f"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_irc_message_filter.html#ab2523779a8e758aa38f46a44e900ac8f">~IrcMessageFilter</a> ()</td></tr>
<tr class="separator:ab2523779a8e758aa38f46a44e900ac8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e842886ccc72097e9439a3753b5edc0"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_irc_message_filter.html#a4e842886ccc72097e9439a3753b5edc0">messageFilter</a> (<a class="el" href="class_irc_message.html">IrcMessage</a> *message)=0</td></tr>
<tr class="separator:a4e842886ccc72097e9439a3753b5edc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_irc_message_filter.html" title="Provides an interface for filtering messages. ">IrcMessageFilter</a> may be used to intercept messages before <a class="el" href="class_irc_connection.html#a621c4c16a74639e9f358bd2ef0f5bccd">IrcConnection::messageReceived()</a> is emitted and the messages get delivered further. In order to use <a class="el" href="class_irc_message_filter.html" title="Provides an interface for filtering messages. ">IrcMessageFilter</a>, it must be installed via <a class="el" href="class_irc_connection.html#a701915b9c5f7999052e3edb8bb0c5a28">IrcConnection::installMessageFilter()</a>.</p>
<p>Message filtering is mostly useful for handling specific replies before the rest of the application receives it. This way there is no need to for example ignore and hide such replies later in the application code.</p>
<p>The following example sends a PING command after each PRIVMSG command. A consequent PONG reply from the server verifies that the PRIVMSG has been also processed.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>CommandVerifier : <span class="keyword">public</span> <a class="codeRef" doxygen="/Users/jpnurmi/Qt/5.1.1/clang_64/doc/qtcore/qtcore.tags:http://qt-project.org/doc/qt-5.1/qtcore/" href="http://qt-project.org/doc/qt-5.1/qtcore/qobject.html">QObject</a>,</div>
<div class="line">                        <span class="keyword">public</span> <a class="code" href="class_irc_command_filter.html">IrcCommandFilter</a>,</div>
<div class="line">                        <span class="keyword">public</span> <a class="code" href="class_irc_message_filter.html">IrcMessageFilter</a></div>
<div class="line">{</div>
<div class="line">    Q_OBJECT</div>
<div class="line">    Q_INTERFACES(<a class="code" href="class_irc_command_filter.html">IrcCommandFilter</a> <a class="code" href="class_irc_message_filter.html">IrcMessageFilter</a>)</div>
<div class="line"></div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    CommandVerifier(<a class="code" href="class_irc_connection.html">IrcConnection</a>* parent) :</div>
<div class="line">        <a class="codeRef" doxygen="/Users/jpnurmi/Qt/5.1.1/clang_64/doc/qtcore/qtcore.tags:http://qt-project.org/doc/qt-5.1/qtcore/" href="http://qt-project.org/doc/qt-5.1/qtcore/qobject.html">QObject</a>(parent), identifier(0), connection(parent)</div>
<div class="line">    {</div>
<div class="line">        connection-&gt;<a class="code" href="class_irc_connection.html#a701915b9c5f7999052e3edb8bb0c5a28">installMessageFilter</a>(<span class="keyword">this</span>);</div>
<div class="line">        connection-&gt;<a class="code" href="class_irc_connection.html#a95d8b4e19094b61760e64f04e5f4e9f2">installCommandFilter</a>(<span class="keyword">this</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> commandFilter(<a class="code" href="class_irc_command.html">IrcCommand</a>* cmd)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (cmd-&gt;<a class="code" href="class_irc_command.html#a07823ad03cf64b483ca3a400d8b1b2e7">type</a>() == <a class="code" href="class_irc_command.html#aa372efb107a86cec49b7587210132325a4c4322cd41986d56420c46e80d3accb2">IrcCommand::Message</a>) {</div>
<div class="line">            cmd-&gt;<a class="codeRef" doxygen="/Users/jpnurmi/Qt/5.1.1/clang_64/doc/qtcore/qtcore.tags:http://qt-project.org/doc/qt-5.1/qtcore/" href="http://qt-project.org/doc/qt-5.1/qtcore/qobject.html#setParent">setParent</a>(<span class="keyword">this</span>); <span class="comment">// take ownership</span></div>
<div class="line">            connection-&gt;<a class="code" href="class_irc_connection.html#a89b7b508feb3faf6223cf03eaa04321f">sendCommand</a>(cmd);</div>
<div class="line">            commands.<a class="codeRef" doxygen="/Users/jpnurmi/Qt/5.1.1/clang_64/doc/qtcore/qtcore.tags:http://qt-project.org/doc/qt-5.1/qtcore/" href="http://qt-project.org/doc/qt-5.1/qtcore/qlist.html#insert">insert</a>(++identifier, cmd);</div>
<div class="line">            connection-&gt;<a class="code" href="class_irc_connection.html#af07f67150c831b5fca9bcb2840cf65c3">sendData</a>(<span class="stringliteral">&quot;PING communi/&quot;</span> + <a class="codeRef" doxygen="/Users/jpnurmi/Qt/5.1.1/clang_64/doc/qtcore/qtcore.tags:http://qt-project.org/doc/qt-5.1/qtcore/" href="http://qt-project.org/doc/qt-5.1/qtcore/qbytearray.html#number">QByteArray::number</a>(identifier));</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_irc_message_filter.html#a4e842886ccc72097e9439a3753b5edc0">messageFilter</a>(<a class="code" href="class_irc_message.html">IrcMessage</a>* msg)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="class_irc_message.html#aa021c38da6e1eef68e8044000f79f7aa">type</a>() == <a class="code" href="class_irc_message.html#a9b859b3a8d24f1a959073ce015460cbea123c6fbb5c67b63ee606fdf450696871">IrcMessage::Pong</a>) {</div>
<div class="line">            <a class="codeRef" doxygen="/Users/jpnurmi/Qt/5.1.1/clang_64/doc/qtcore/qtcore.tags:http://qt-project.org/doc/qt-5.1/qtcore/" href="http://qt-project.org/doc/qt-5.1/qtcore/qstring.html">QString</a> arg = <span class="keyword">static_cast&lt;</span><a class="code" href="class_irc_pong_message.html">IrcPongMessage</a>*<span class="keyword">&gt;</span>(msg)-&gt;argument();</div>
<div class="line">            <span class="keywordflow">if</span> (arg.<a class="codeRef" doxygen="/Users/jpnurmi/Qt/5.1.1/clang_64/doc/qtcore/qtcore.tags:http://qt-project.org/doc/qt-5.1/qtcore/" href="http://qt-project.org/doc/qt-5.1/qtcore/qstring.html#startsWith">startsWith</a>(<span class="stringliteral">&quot;communi/&quot;</span>)) {</div>
<div class="line">                <span class="keywordtype">bool</span> ok = <span class="keyword">false</span>;</div>
<div class="line">                quint64 <span class="keywordtype">id</span> = arg.<a class="codeRef" doxygen="/Users/jpnurmi/Qt/5.1.1/clang_64/doc/qtcore/qtcore.tags:http://qt-project.org/doc/qt-5.1/qtcore/" href="http://qt-project.org/doc/qt-5.1/qtcore/qstring.html#mid">mid</a>(8).<a class="codeRef" doxygen="/Users/jpnurmi/Qt/5.1.1/clang_64/doc/qtcore/qtcore.tags:http://qt-project.org/doc/qt-5.1/qtcore/" href="http://qt-project.org/doc/qt-5.1/qtcore/qstring.html#toULongLong">toULongLong</a>(&amp;ok);</div>
<div class="line">                <span class="keywordflow">if</span> (ok) {</div>
<div class="line">                    <a class="code" href="class_irc_command.html">IrcCommand</a>* command = commands.take(<span class="keywordtype">id</span>);</div>
<div class="line">                    <span class="keywordflow">if</span> (command) {</div>
<div class="line">                        emit verified(command);</div>
<div class="line">                        command-&gt;<a class="codeRef" doxygen="/Users/jpnurmi/Qt/5.1.1/clang_64/doc/qtcore/qtcore.tags:http://qt-project.org/doc/qt-5.1/qtcore/" href="http://qt-project.org/doc/qt-5.1/qtcore/qobject.html#deleteLater">deleteLater</a>();</div>
<div class="line">                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">signals:</div>
<div class="line">    <span class="keywordtype">void</span> verified(<a class="code" href="class_irc_command.html">IrcCommand</a>* cmd);</div>
<div class="line"></div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    quint64 identifier;</div>
<div class="line">    <a class="code" href="class_irc_connection.html">IrcConnection</a>* connection;</div>
<div class="line">    <a class="codeRef" doxygen="/Users/jpnurmi/Qt/5.1.1/clang_64/doc/qtcore/qtcore.tags:http://qt-project.org/doc/qt-5.1/qtcore/" href="http://qt-project.org/doc/qt-5.1/qtcore/qmap.html">QMap&lt;quint64, IrcCommand*&gt;</a> commands;</div>
<div class="line">};</div>
</div><!-- fragment --><dl class="section see"><dt>See Also</dt><dd><a class="el" href="class_irc_connection.html#a701915b9c5f7999052e3edb8bb0c5a28">IrcConnection::installMessageFilter()</a>, <a class="el" href="class_irc_command_filter.html" title="Provides an interface for filtering commands. ">IrcCommandFilter</a> </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab2523779a8e758aa38f46a44e900ac8f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IrcMessageFilter::~IrcMessageFilter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Destructs the message filter.</p>
<p>The message filter is automatically removed from any connection(s) it is installed on.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="class_irc_connection.html#a519b70621b41a74820fd297eb82d2920">IrcConnection::removeMessageFilter()</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4e842886ccc72097e9439a3753b5edc0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool IrcMessageFilter::messageFilter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_irc_message.html">IrcMessage</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Reimplement this function to filter messages from installed connections.</p>
<p>Return <code>true</code> to filter the message out, i.e. stop it being handled further; otherwise return <code>false</code>.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="class_irc_connection.html#a701915b9c5f7999052e3edb8bb0c5a28">IrcConnection::installMessageFilter()</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Oct 20 2013 16:12:02 for Communi by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
